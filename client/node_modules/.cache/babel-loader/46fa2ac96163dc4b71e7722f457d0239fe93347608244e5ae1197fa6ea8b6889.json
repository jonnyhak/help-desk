{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EditTicket(_ref){let{ticket}=_ref;const[status,setStatus]=useState(ticket.status);const[reply,setReply]=useState(ticket.reply);//edit ticket function\nconst updateTicket=async e=>{e.preventDefault();try{const body={reply,status};//proxy\nconst response=await fetch(\"http://localhost:5000/tickets/\".concat(ticket.ticket_id),{// const response = await fetch(`/tickets/${ticket.ticket_id}`,{\n// const response = await fetch(`https://pern-helpdesk-f52ef804084b.herokuapp.com/tickets/${ticket.ticket_id}`,{\nmethod:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});window.location=\"/ticketsList\";}catch(err){console.error(err.message);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning\",\"data-toggle\":\"modal\",\"data-target\":\"#id\".concat(ticket.ticket_id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal\",id:\"id\".concat(ticket.ticket_id),children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"modal-title\",children:\"Edit Ticket\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",onClick:()=>setStatus(ticket.status),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.ticket_id}),/*#__PURE__*/_jsx(\"td\",{children:ticket.username}),/*#__PURE__*/_jsx(\"td\",{children:ticket.email}),/*#__PURE__*/_jsx(\"td\",{children:ticket.description})]})})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"respond to request...\",className:\"form-control\",cols:\"30\",rows:\"3\",value:reply,onChange:e=>setReply(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:status,onChange:e=>setStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"new\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in progress\",children:\"in progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"resolved\",children:\"resolved\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning\",\"data-dismiss\":\"modal\",onClick:e=>{if(reply){window.alert(\"Would normally send email here with body: \\\"\".concat(reply,\"\\\"\"));console.log(\"Would normally send email here with body: \\\"\".concat(reply,\"\\\"\"));}updateTicket(e);},children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",\"data-dismiss\":\"modal\",onClick:()=>setStatus(ticket.status),children:\"Close\"})]})]})})})]});}export default EditTicket;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditTicket","_ref","ticket","status","setStatus","reply","setReply","updateTicket","e","preventDefault","body","response","fetch","concat","ticket_id","method","headers","JSON","stringify","window","location","err","console","error","message","children","type","className","id","onClick","username","email","description","placeholder","cols","rows","value","onChange","target","alert","log"],"sources":["C:/Users/jonny/OneDrive/Desktop/ReactProjects/PERN-HelpDesk/client/src/components/EditTicket.js"],"sourcesContent":["import React, {useState} from 'react'\r\n\r\nfunction EditTicket({ ticket }) {\r\n    const [status, setStatus] = useState(ticket.status)\r\n    const [reply, setReply] = useState(ticket.reply)\r\n\r\n    //edit ticket function\r\n\r\n    const updateTicket = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const body = {reply, status};\r\n\r\n            //proxy\r\n\r\n            const response = await fetch(`http://localhost:5000/tickets/${ticket.ticket_id}`,{\r\n            // const response = await fetch(`/tickets/${ticket.ticket_id}`,{\r\n            // const response = await fetch(`https://pern-helpdesk-f52ef804084b.herokuapp.com/tickets/${ticket.ticket_id}`,{\r\n                method: \"PUT\",\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n                body: JSON.stringify(body)\r\n            })\r\n\r\n            window.location = \"/ticketsList\"\r\n        } catch (err) {\r\n            console.error(err.message)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n    <>\r\n        <button \r\n            type=\"button\" \r\n            className=\"btn btn-warning\" \r\n            data-toggle=\"modal\" \r\n            data-target={`#id${ticket.ticket_id}`}\r\n        >\r\n            Edit\r\n        </button>\r\n\r\n        <div className=\"modal\" id={`id${ticket.ticket_id}`} >\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n\r\n                    <div className=\"modal-header\">\r\n                        <h4 className=\"modal-title\">Edit Ticket</h4>\r\n                        <button \r\n                            type=\"button\" \r\n                            className=\"close\" \r\n                            data-dismiss=\"modal\"\r\n                            onClick={() => setStatus(ticket.status)}\r\n                        >\r\n                            &times;\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"modal-body\">\r\n                    <table className=\"table text-center\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Id</th>\r\n                                <th>Name</th>\r\n                                <th>Email</th>\r\n                                <th>Description</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>{ticket.ticket_id}</td>\r\n                                <td>{ticket.username}</td>\r\n                                <td>{ticket.email}</td>\r\n                                <td>{ticket.description}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                        <textarea \r\n                            placeholder='respond to request...' \r\n                            className=\"form-control\" \r\n                            cols=\"30\" \r\n                            rows=\"3\"\r\n                            value={reply}\r\n                            onChange={e => setReply(e.target.value)}\r\n                        >\r\n                        </textarea>\r\n                        <br />\r\n                        <select \r\n                            className=\"form-control\"\r\n                            value={status} \r\n                            onChange={e => setStatus(e.target.value)}\r\n                        >\r\n                            <option value=\"new\">new</option>\r\n                            <option value=\"in progress\">in progress</option>\r\n                            <option value=\"resolved\">resolved</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"modal-footer\">\r\n                        <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-warning\" \r\n                            data-dismiss=\"modal\"\r\n                            onClick={e => {\r\n                                if (reply){\r\n                                    window.alert(`Would normally send email here with body: \"${reply}\"`)\r\n                                    console.log(`Would normally send email here with body: \"${reply}\"`)   \r\n                                }\r\n                                updateTicket(e)\r\n                            }}\r\n                        >\r\n                            Update\r\n                        </button>\r\n                        <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-danger\" \r\n                            data-dismiss=\"modal\"\r\n                            onClick={() => setStatus(ticket.status)}\r\n                        >\r\n                            Close\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EditTicket"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}