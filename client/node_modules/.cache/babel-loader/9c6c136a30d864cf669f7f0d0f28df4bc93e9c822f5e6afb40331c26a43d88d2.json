{"ast":null,"code":"import React,{useEffect,useState}from'react';import EditTicket from'./EditTicket';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ListTickets(){const[tickets,setTickets]=useState([]);const[searchText,setSearchText]=useState(\"\");//delete ticket function\nconst deleteTicket=async id=>{try{//   const deleteTicket = await fetch(`http://localhost:5000/tickets/${id}`, {\nconst deleteTicket=await fetch(\"/tickets/\".concat(id),{method:\"DELETE\"});setTickets(tickets.filter(ticket=>ticket.ticket_id!==id));}catch(err){console.error(err.message);}};const getTickets=async()=>{try{//    const response = await fetch(\"http://localhost:5000/tickets\")\nconst response=await fetch(\"/tickets\");const jsonData=await response.json();setTickets(jsonData);}catch(err){console.error(err.message);}};const changeSearchText=e=>{// let inputText = e.target.value.toLowerCase()\nsetSearchText(e.target.value.toLowerCase());};const filteredTickets=tickets.filter(ticket=>{return ticket.username.toLowerCase().includes(searchText)||ticket.email.toLowerCase().includes(searchText)||ticket.description.toLowerCase().includes(searchText)||ticket.status.toLowerCase().includes(searchText);});useEffect(()=>{getTickets();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mt-2\",children:\"Tickets List\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"search tickets...\",value:searchText,onChange:changeSearchText}),/*#__PURE__*/_jsxs(\"table\",{className:\"table mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredTickets.map(ticket=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.ticket_id}),/*#__PURE__*/_jsx(\"td\",{children:ticket.username}),/*#__PURE__*/_jsx(\"td\",{children:ticket.email}),/*#__PURE__*/_jsx(\"td\",{children:ticket.description}),/*#__PURE__*/_jsx(\"td\",{children:ticket.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTicket,{ticket:ticket})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTicket(ticket.ticket_id),className:\"btn btn-danger\",children:\"Delete\"})})]},ticket.ticket_id))})]})]});}export default ListTickets;","map":{"version":3,"names":["React","useEffect","useState","EditTicket","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ListTickets","tickets","setTickets","searchText","setSearchText","deleteTicket","id","fetch","concat","method","filter","ticket","ticket_id","err","console","error","message","getTickets","response","jsonData","json","changeSearchText","e","target","value","toLowerCase","filteredTickets","username","includes","email","description","status","children","to","className","type","placeholder","onChange","map","onClick"],"sources":["C:/Users/jonny/OneDrive/Desktop/ReactProjects/PERN-HelpDesk/client/src/components/ListTickets.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport EditTicket from './EditTicket';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ListTickets() {\r\n    const [tickets, setTickets] = useState([]);\r\n    const [searchText, setSearchText] = useState(\"\");\r\n\r\n    //delete ticket function\r\n\r\n    const deleteTicket = async id => {\r\n        try {\r\n        //   const deleteTicket = await fetch(`http://localhost:5000/tickets/${id}`, {\r\n          const deleteTicket = await fetch(`/tickets/${id}`, {\r\n            method: \"DELETE\"\r\n          });\r\n    \r\n          setTickets(tickets.filter(ticket => ticket.ticket_id !== id));\r\n        } catch (err) {\r\n          console.error(err.message);\r\n        }\r\n      };\r\n\r\n    const getTickets = async () => {\r\n        try {\r\n        //    const response = await fetch(\"http://localhost:5000/tickets\")\r\n           const response = await fetch(\"/tickets\")\r\n           const jsonData = await response.json()\r\n           \r\n           setTickets(jsonData)\r\n\r\n        } catch (err) {\r\n            console.error(err.message)\r\n        }\r\n    }\r\n\r\n    const changeSearchText = (e) => {\r\n        // let inputText = e.target.value.toLowerCase()\r\n        setSearchText(e.target.value.toLowerCase())\r\n    }\r\n    \r\n    const filteredTickets = tickets.filter((ticket) => {\r\n        return (\r\n            ticket.username.toLowerCase().includes(searchText) ||\r\n            ticket.email.toLowerCase().includes(searchText) ||\r\n            ticket.description.toLowerCase().includes(searchText) ||\r\n            ticket.status.toLowerCase().includes(searchText) \r\n        )\r\n    })\r\n\r\n    useEffect(() => {\r\n        getTickets();\r\n    }, []);\r\n    \r\n    return (\r\n    <>\r\n        <Link to=\"/\">Home</Link>\r\n        <h1 className='text-center mt-2'>Tickets List</h1>\r\n        <br />\r\n        <input \r\n            type=\"text\" \r\n            placeholder='search tickets...'\r\n            value={searchText}\r\n            onChange={changeSearchText}\r\n        />\r\n        <table className=\"table mt-5 text-center\">\r\n            <thead>\r\n                <tr>\r\n                    <th>Id</th>\r\n                    <th>Name</th>\r\n                    <th>Email</th>\r\n                    <th>Description</th>\r\n                    <th>Status</th>\r\n                    <th>Edit</th>\r\n                    <th>Delete</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {filteredTickets.map(ticket => (\r\n                    <tr key={ticket.ticket_id}>\r\n                        <td>{ticket.ticket_id}</td>\r\n                        <td>{ticket.username}</td>\r\n                        <td>{ticket.email}</td>\r\n                        <td>{ticket.description}</td>\r\n                        <td>{ticket.status}</td>\r\n                        <td>\r\n                            <EditTicket ticket={ticket}/>\r\n                        </td>\r\n                        <td>\r\n                            <button onClick={() => deleteTicket(ticket.ticket_id)} className='btn btn-danger'>\r\n                                Delete\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ListTickets"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}